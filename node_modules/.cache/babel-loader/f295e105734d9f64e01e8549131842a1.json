{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransitionGroup = exports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\n\nvar _eqBy = _interopRequireDefault(require(\"ramda/src/eqBy\"));\n\nvar _findIndex = _interopRequireDefault(require(\"ramda/src/findIndex\"));\n\nvar _identity = _interopRequireDefault(require(\"ramda/src/identity\"));\n\nvar _prop = _interopRequireDefault(require(\"ramda/src/prop\"));\n\nvar _propEq = _interopRequireDefault(require(\"ramda/src/propEq\"));\n\nvar _remove = _interopRequireDefault(require(\"ramda/src/remove\"));\n\nvar _unionWith = _interopRequireDefault(require(\"ramda/src/unionWith\"));\n\nvar _useWith = _interopRequireDefault(require(\"ramda/src/useWith\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n/**\n * Returns the index of a child in an array found by `key` matching\n *\n * @param {Object} child React element to find\n * @param {Object[]} children Array of React elements\n * @returns {Number} Index of child\n * @method\n * @private\n */\n// eslint-disable-next-line react-hooks/rules-of-hooks\n\n\nvar indexOfChild = (0, _useWith[\"default\"])(_findIndex[\"default\"], [(0, _propEq[\"default\"])('key'), _identity[\"default\"]]);\n/**\n * Returns an array of non-null children\n *\n * @param  {Object[]} children Array of React children\n *\n * @returns {Object[]}          Array of children\n * @private\n */\n\nvar mapChildren = function mapChildren(children) {\n  var result = children && _react[\"default\"].Children.toArray(children);\n\n  return result ? result.filter(function (c) {\n    return !!c;\n  }) : [];\n};\n/**\n * Merges two arrays of children without any duplicates (by `key`)\n *\n * @param {Object[]} a Set of children\n * @param {Object[]} b Set of children\n * @returns {Object[]} Merged set of children\n * @method\n * @private\n */\n\n\nvar mergeChildren = (0, _unionWith[\"default\"])((0, _eqBy[\"default\"])((0, _prop[\"default\"])('key'))); // Cached event forwarders\n\nvar forwardOnAppear = (0, _handle.forward)('onAppear');\nvar forwardOnEnter = (0, _handle.forward)('onEnter');\nvar forwardOnLeave = (0, _handle.forward)('onLeave');\nvar forwardOnStay = (0, _handle.forward)('onStay');\nvar forwardOnTransition = (0, _handle.forward)('onTransition');\nvar forwardOnWillTransition = (0, _handle.forward)('onWillTransition');\n/**\n * Manages the transition of added and removed child components. Children that are added are\n * transitioned in and those removed are transition out via optional callbacks on the child.\n *\n * Ported from [ReactTransitionGroup]\n * (https://facebook.github.io/react/docs/animation.html#low-level-api-reacttransitiongroup).\n * Currently somewhat specialized for the purposes of ViewManager.\n *\n * @class TransitionGroup\n * @memberof ui/ViewManager\n * @private\n */\n\nvar TransitionGroup = /*#__PURE__*/function (_React$Component) {\n  _inherits(TransitionGroup, _React$Component);\n\n  var _super = _createSuper(TransitionGroup);\n\n  function TransitionGroup(props) {\n    var _this;\n\n    _classCallCheck(this, TransitionGroup);\n\n    _this = _super.call(this, props);\n\n    _this.performAppear = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillAppear) {\n        component.componentWillAppear(_this._handleDoneAppearing.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneAppearing(key);\n      }\n    };\n\n    _this._handleDoneAppearing = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidAppear) {\n        component.componentDidAppear();\n      }\n\n      forwardOnAppear({\n        view: component\n      }, _this.props);\n\n      _this.completeTransition({\n        key: key,\n        noForwarding: true\n      });\n\n      var currentChildMapping = mapChildren(_this.props.children);\n\n      if (!currentChildMapping || !currentChildMapping.find(function (child) {\n        return child.key === key;\n      })) {\n        // This was removed before it had fully appeared. Remove it.\n        _this.performLeave(key);\n      }\n    };\n\n    _this.performEnter = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillEnter) {\n        component.componentWillEnter(_this._handleDoneEntering.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneEntering(key);\n      }\n    };\n\n    _this._handleDoneEntering = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidEnter) {\n        component.componentDidEnter();\n      }\n\n      forwardOnEnter({\n        view: component\n      }, _this.props);\n\n      _this.completeTransition({\n        key: key\n      });\n    };\n\n    _this.performStay = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillStay) {\n        component.componentWillStay(_this._handleDoneStaying.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneStaying(key);\n      }\n    };\n\n    _this._handleDoneStaying = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidStay) {\n        component.componentDidStay();\n      }\n\n      forwardOnStay({\n        view: component\n      }, _this.props);\n    };\n\n    _this.performLeave = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillLeave) {\n        component.componentWillLeave(_this._handleDoneLeaving.bind(_assertThisInitialized(_this), key));\n      } else {\n        // Note that this is somewhat dangerous b/c it calls setState()\n        // again, effectively mutating the component before all the work\n        // is done.\n        _this._handleDoneLeaving(key);\n      }\n    };\n\n    _this._handleDoneLeaving = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidLeave) {\n        component.componentDidLeave();\n      }\n\n      forwardOnLeave({\n        view: component\n      }, _this.props);\n\n      _this.completeTransition({\n        key: key\n      });\n\n      _this.setState(function (state) {\n        var index = indexOfChild(key, state.children);\n        return {\n          children: (0, _remove[\"default\"])(index, 1, state.children)\n        };\n      });\n    };\n\n    _this.storeRefs = function (key) {\n      return function (node) {\n        _this.groupRefs[key] = node;\n      };\n    };\n\n    _this.state = {\n      firstRender: true,\n      children: []\n    };\n    _this.hasMounted = false;\n    _this.currentlyTransitioningKeys = {};\n    _this.keysToEnter = [];\n    _this.keysToLeave = [];\n    _this.keysToStay = [];\n    _this.groupRefs = {};\n    return _this;\n  }\n\n  _createClass(TransitionGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.hasMounted = true; // this isn't used by ViewManager or View at the moment but leaving it around for future\n      // flexibility\n\n      this.state.children.forEach(function (child) {\n        return _this2.performAppear(child.key);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      this.reconcileUnmountedChildren(prevState.children, this.state.children);\n      this.reconcileChildren(prevState.activeChildren, this.state.activeChildren);\n    }\n  }, {\n    key: \"reconcileUnmountedChildren\",\n    value: function reconcileUnmountedChildren(prevChildMapping, nextChildMapping) {\n      var _this3 = this;\n\n      var nextChildKeys = nextChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevChildMapping.map(function (c) {\n        return c.key;\n      }); // `state.children` represents the mounted children. if a view change happens during a\n      // transition causing the View to be unmounted before it fires its callback, the\n      // currentlyTransitioningKeys map will be out of sync. To manage that, we check for keys\n      // that have fallen out of the `children` array and manually clean them up from the map.\n\n      prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      }).forEach(function (key) {\n        return _this3.completeTransition({\n          key: key\n        });\n      });\n    }\n  }, {\n    key: \"reconcileChildren\",\n    value: function reconcileChildren(prevActiveChildMapping, nextActiveChildMapping) {\n      var _this4 = this;\n\n      var size = this.props.size;\n      var nextChildKeys = nextActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var droppedKeys = prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      }); // if children haven't changed, there's nothing to reconcile\n\n      if (prevActiveChildMapping.length === nextActiveChildMapping.length && droppedKeys.length === 0) {\n        return;\n      } // remove any \"dropped\" children from the list of transitioning children\n\n\n      droppedKeys.forEach(function (key) {\n        return _this4.completeTransition({\n          key: key\n        });\n      }); // mark any new child as entering\n\n      nextChildKeys.forEach(function (key, index) {\n        var hasPrev = prevChildKeys.includes(key);\n\n        if (!hasPrev || _this4.currentlyTransitioningKeys[key]) {\n          // flag a view to enter if it's new (!hasPrev), or if it's not new (hasPrev) but is\n          // re-entering (is currently transitioning)\n          _this4.keysToEnter.push(key);\n        } else if (index < size - 1) {\n          // keep views that are less than size minus the \"transition out\" buffer\n          _this4.keysToStay.push(key);\n        } else {\n          // everything else is leaving\n          _this4.keysToLeave.push(key);\n        }\n      }); // mark any previous child not remaining as leaving\n\n      prevChildKeys.forEach(function (key) {\n        var hasNext = nextChildKeys.includes(key);\n        var isRendered = Boolean(_this4.groupRefs[key]); // flag a view to leave if it isn't in the new set (!hasNext) and it exists (isRendered)\n\n        if (!hasNext && isRendered) {\n          _this4.keysToLeave.push(key);\n        }\n      });\n\n      if (this.keysToEnter.length || this.keysToLeave.length) {\n        forwardOnWillTransition(null, this.props);\n      } // once the component has been updated, start the enter transition for new children,\n\n\n      var keysToEnter = this.keysToEnter;\n      this.keysToEnter = [];\n      keysToEnter.forEach(this.performEnter); // ... the stay transition for any children remaining,\n\n      var keysToStay = this.keysToStay;\n      this.keysToStay = [];\n      keysToStay.forEach(this.performStay); // ... and the leave transition for departing children\n\n      var keysToLeave = this.keysToLeave;\n      this.keysToLeave = [];\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: \"completeTransition\",\n    value: function completeTransition(_ref) {\n      var key = _ref.key,\n          _ref$noForwarding = _ref.noForwarding,\n          noForwarding = _ref$noForwarding === void 0 ? false : _ref$noForwarding;\n\n      if (key in this.currentlyTransitioningKeys) {\n        delete this.currentlyTransitioningKeys[key];\n\n        if (!noForwarding && Object.keys(this.currentlyTransitioningKeys).length === 0) {\n          forwardOnTransition(null, this.props);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this; // support wrapping arbitrary children with a component that supports the necessary\n      // lifecycle methods to animate transitions\n\n\n      var childrenToRender = this.state.children.map(function (child) {\n        var isLeaving = child.props['data-index'] !== _this5.props.currentIndex && typeof child.props['data-index'] !== 'undefined';\n        return /*#__PURE__*/_react[\"default\"].cloneElement(_this5.props.childFactory(child), {\n          key: child.key,\n          ref: _this5.storeRefs(child.key),\n          leaving: isLeaving,\n          appearing: !_this5.hasMounted\n        });\n      }); // Do not forward TransitionGroup props to primitive DOM nodes\n\n      var props = Object.assign({}, this.props);\n      props.ref = this.props.componentRef;\n      delete props.childFactory;\n      delete props.component;\n      delete props.componentRef;\n      delete props.currentIndex;\n      delete props.onAppear;\n      delete props.onAppear;\n      delete props.onEnter;\n      delete props.onLeave;\n      delete props.onStay;\n      delete props.onTransition;\n      delete props.onWillTransition;\n      delete props.size;\n      return /*#__PURE__*/_react[\"default\"].createElement(this.props.component, props, childrenToRender);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var children = mapChildren(props.children).slice(0, props.size);\n\n      if (state.firstRender) {\n        return {\n          activeChildren: children,\n          children: children,\n          firstRender: false\n        };\n      }\n\n      return {\n        activeChildren: children,\n        children: mergeChildren(children, state.children).slice(0, props.size)\n      };\n    }\n  }]);\n\n  return TransitionGroup;\n}(_react[\"default\"].Component);\n\nexports.TransitionGroup = TransitionGroup;\nTransitionGroup.propTypes =\n/** @lends ui/ViewManager.TransitionGroup.prototype */\n{\n  children: _propTypes2[\"default\"].node.isRequired,\n\n  /**\n   * Adapts children to be compatible with TransitionGroup\n   *\n   * @type {Function}\n   */\n  childFactory: _propTypes2[\"default\"].func,\n\n  /**\n   * Type of component wrapping the children.\n   *\n   * May be a DOM node or a custom React component.\n   *\n   * @type {String|Component}\n   * @default 'div'\n   */\n  component: _propTypes[\"default\"].renderable,\n\n  /**\n   * Called with a reference to [component]{@link ui/ViewManager.TransitionGroup#component}\n   *\n   * @type {Object|Function}\n   * @private\n   */\n  componentRef: _propTypes[\"default\"].ref,\n\n  /**\n   * Current Index the ViewManager is on\n   *\n   * @type {Number}\n   */\n  currentIndex: _propTypes2[\"default\"].number,\n\n  /**\n   * Called when each view is rendered during initial construction.\n   *\n   * @type {Function}\n   */\n  onAppear: _propTypes2[\"default\"].func,\n\n  /**\n   * Called when each view completes its transition into the viewport.\n   *\n   * @type {Function}\n   */\n  onEnter: _propTypes2[\"default\"].func,\n\n  /**\n   * Called when each view completes its transition out of the viewport.\n   *\n   * @type {Function}\n   */\n  onLeave: _propTypes2[\"default\"].func,\n\n  /**\n   * Called when each view completes its transition within the viewport.\n   *\n   * @type {Function}\n   */\n  onStay: _propTypes2[\"default\"].func,\n\n  /**\n   * Called once when all views have completed their transition.\n   *\n   * @type {Function}\n   */\n  onTransition: _propTypes2[\"default\"].func,\n\n  /**\n   * Called once before views begin their transition.\n   *\n   * @type {Function}\n   */\n  onWillTransition: _propTypes2[\"default\"].func,\n\n  /**\n   * Maximum number of rendered children.\n   *\n   * Used to limit how many visible transitions are active at any time.\n   * A value of 1 would prevent any exit transitions whereas a value of 2,\n   * the default, would ensure that only 1 view is transitioning on and 1 view is\n   * transitioning off at a time.\n   *\n   * @type {Number}\n   * @default 2\n   */\n  size: _propTypes2[\"default\"].number\n};\nTransitionGroup.defaultProps = {\n  childFactory: _identity[\"default\"],\n  component: 'div',\n  size: 2\n};\nvar _default = TransitionGroup;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/sonjaeseong/workspace/webOS/CARROT/webOS_GUI/node_modules/@enact/ui/ViewManager/TransitionGroup.js"],"names":["Object","defineProperty","exports","value","TransitionGroup","_propTypes","_interopRequireDefault","require","_handle","_propTypes2","_eqBy","_findIndex","_identity","_prop","_propEq","_remove","_unionWith","_useWith","_react","obj","__esModule","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","prototype","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Date","toString","e","getPrototypeOf","indexOfChild","mapChildren","children","Children","toArray","filter","c","mergeChildren","forwardOnAppear","forward","forwardOnEnter","forwardOnLeave","forwardOnStay","forwardOnTransition","forwardOnWillTransition","_React$Component","_super","_this","performAppear","currentlyTransitioningKeys","component","groupRefs","componentWillAppear","_handleDoneAppearing","bind","componentDidAppear","view","completeTransition","noForwarding","currentChildMapping","find","child","performLeave","performEnter","componentWillEnter","_handleDoneEntering","componentDidEnter","performStay","componentWillStay","_handleDoneStaying","componentDidStay","componentWillLeave","_handleDoneLeaving","componentDidLeave","setState","state","index","storeRefs","node","firstRender","hasMounted","keysToEnter","keysToLeave","keysToStay","componentDidMount","_this2","forEach","componentDidUpdate","prevProps","prevState","reconcileUnmountedChildren","reconcileChildren","activeChildren","prevChildMapping","nextChildMapping","_this3","nextChildKeys","map","prevChildKeys","includes","prevActiveChildMapping","nextActiveChildMapping","_this4","size","droppedKeys","hasPrev","push","hasNext","isRendered","Boolean","_ref","_ref$noForwarding","keys","render","_this5","childrenToRender","isLeaving","currentIndex","cloneElement","childFactory","ref","leaving","appearing","assign","componentRef","onAppear","onEnter","onLeave","onStay","onTransition","onWillTransition","createElement","getDerivedStateFromProps","slice","Component","propTypes","isRequired","func","renderable","number","defaultProps","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TransitionGroup = exports[\"default\"] = void 0;\n\nvar _propTypes = _interopRequireDefault(require(\"@enact/core/internal/prop-types\"));\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _propTypes2 = _interopRequireDefault(require(\"prop-types\"));\n\nvar _eqBy = _interopRequireDefault(require(\"ramda/src/eqBy\"));\n\nvar _findIndex = _interopRequireDefault(require(\"ramda/src/findIndex\"));\n\nvar _identity = _interopRequireDefault(require(\"ramda/src/identity\"));\n\nvar _prop = _interopRequireDefault(require(\"ramda/src/prop\"));\n\nvar _propEq = _interopRequireDefault(require(\"ramda/src/propEq\"));\n\nvar _remove = _interopRequireDefault(require(\"ramda/src/remove\"));\n\nvar _unionWith = _interopRequireDefault(require(\"ramda/src/unionWith\"));\n\nvar _useWith = _interopRequireDefault(require(\"ramda/src/useWith\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * Returns the index of a child in an array found by `key` matching\n *\n * @param {Object} child React element to find\n * @param {Object[]} children Array of React elements\n * @returns {Number} Index of child\n * @method\n * @private\n */\n// eslint-disable-next-line react-hooks/rules-of-hooks\nvar indexOfChild = (0, _useWith[\"default\"])(_findIndex[\"default\"], [(0, _propEq[\"default\"])('key'), _identity[\"default\"]]);\n/**\n * Returns an array of non-null children\n *\n * @param  {Object[]} children Array of React children\n *\n * @returns {Object[]}          Array of children\n * @private\n */\n\nvar mapChildren = function mapChildren(children) {\n  var result = children && _react[\"default\"].Children.toArray(children);\n\n  return result ? result.filter(function (c) {\n    return !!c;\n  }) : [];\n};\n/**\n * Merges two arrays of children without any duplicates (by `key`)\n *\n * @param {Object[]} a Set of children\n * @param {Object[]} b Set of children\n * @returns {Object[]} Merged set of children\n * @method\n * @private\n */\n\n\nvar mergeChildren = (0, _unionWith[\"default\"])((0, _eqBy[\"default\"])((0, _prop[\"default\"])('key'))); // Cached event forwarders\n\nvar forwardOnAppear = (0, _handle.forward)('onAppear');\nvar forwardOnEnter = (0, _handle.forward)('onEnter');\nvar forwardOnLeave = (0, _handle.forward)('onLeave');\nvar forwardOnStay = (0, _handle.forward)('onStay');\nvar forwardOnTransition = (0, _handle.forward)('onTransition');\nvar forwardOnWillTransition = (0, _handle.forward)('onWillTransition');\n/**\n * Manages the transition of added and removed child components. Children that are added are\n * transitioned in and those removed are transition out via optional callbacks on the child.\n *\n * Ported from [ReactTransitionGroup]\n * (https://facebook.github.io/react/docs/animation.html#low-level-api-reacttransitiongroup).\n * Currently somewhat specialized for the purposes of ViewManager.\n *\n * @class TransitionGroup\n * @memberof ui/ViewManager\n * @private\n */\n\nvar TransitionGroup = /*#__PURE__*/function (_React$Component) {\n  _inherits(TransitionGroup, _React$Component);\n\n  var _super = _createSuper(TransitionGroup);\n\n  function TransitionGroup(props) {\n    var _this;\n\n    _classCallCheck(this, TransitionGroup);\n\n    _this = _super.call(this, props);\n\n    _this.performAppear = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillAppear) {\n        component.componentWillAppear(_this._handleDoneAppearing.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneAppearing(key);\n      }\n    };\n\n    _this._handleDoneAppearing = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidAppear) {\n        component.componentDidAppear();\n      }\n\n      forwardOnAppear({\n        view: component\n      }, _this.props);\n\n      _this.completeTransition({\n        key: key,\n        noForwarding: true\n      });\n\n      var currentChildMapping = mapChildren(_this.props.children);\n\n      if (!currentChildMapping || !currentChildMapping.find(function (child) {\n        return child.key === key;\n      })) {\n        // This was removed before it had fully appeared. Remove it.\n        _this.performLeave(key);\n      }\n    };\n\n    _this.performEnter = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillEnter) {\n        component.componentWillEnter(_this._handleDoneEntering.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneEntering(key);\n      }\n    };\n\n    _this._handleDoneEntering = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidEnter) {\n        component.componentDidEnter();\n      }\n\n      forwardOnEnter({\n        view: component\n      }, _this.props);\n\n      _this.completeTransition({\n        key: key\n      });\n    };\n\n    _this.performStay = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillStay) {\n        component.componentWillStay(_this._handleDoneStaying.bind(_assertThisInitialized(_this), key));\n      } else {\n        _this._handleDoneStaying(key);\n      }\n    };\n\n    _this._handleDoneStaying = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidStay) {\n        component.componentDidStay();\n      }\n\n      forwardOnStay({\n        view: component\n      }, _this.props);\n    };\n\n    _this.performLeave = function (key) {\n      _this.currentlyTransitioningKeys[key] = true;\n      var component = _this.groupRefs[key];\n\n      if (component.componentWillLeave) {\n        component.componentWillLeave(_this._handleDoneLeaving.bind(_assertThisInitialized(_this), key));\n      } else {\n        // Note that this is somewhat dangerous b/c it calls setState()\n        // again, effectively mutating the component before all the work\n        // is done.\n        _this._handleDoneLeaving(key);\n      }\n    };\n\n    _this._handleDoneLeaving = function (key) {\n      var component = _this.groupRefs[key];\n\n      if (component.componentDidLeave) {\n        component.componentDidLeave();\n      }\n\n      forwardOnLeave({\n        view: component\n      }, _this.props);\n\n      _this.completeTransition({\n        key: key\n      });\n\n      _this.setState(function (state) {\n        var index = indexOfChild(key, state.children);\n        return {\n          children: (0, _remove[\"default\"])(index, 1, state.children)\n        };\n      });\n    };\n\n    _this.storeRefs = function (key) {\n      return function (node) {\n        _this.groupRefs[key] = node;\n      };\n    };\n\n    _this.state = {\n      firstRender: true,\n      children: []\n    };\n    _this.hasMounted = false;\n    _this.currentlyTransitioningKeys = {};\n    _this.keysToEnter = [];\n    _this.keysToLeave = [];\n    _this.keysToStay = [];\n    _this.groupRefs = {};\n    return _this;\n  }\n\n  _createClass(TransitionGroup, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.hasMounted = true; // this isn't used by ViewManager or View at the moment but leaving it around for future\n      // flexibility\n\n      this.state.children.forEach(function (child) {\n        return _this2.performAppear(child.key);\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      this.reconcileUnmountedChildren(prevState.children, this.state.children);\n      this.reconcileChildren(prevState.activeChildren, this.state.activeChildren);\n    }\n  }, {\n    key: \"reconcileUnmountedChildren\",\n    value: function reconcileUnmountedChildren(prevChildMapping, nextChildMapping) {\n      var _this3 = this;\n\n      var nextChildKeys = nextChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevChildMapping.map(function (c) {\n        return c.key;\n      }); // `state.children` represents the mounted children. if a view change happens during a\n      // transition causing the View to be unmounted before it fires its callback, the\n      // currentlyTransitioningKeys map will be out of sync. To manage that, we check for keys\n      // that have fallen out of the `children` array and manually clean them up from the map.\n\n      prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      }).forEach(function (key) {\n        return _this3.completeTransition({\n          key: key\n        });\n      });\n    }\n  }, {\n    key: \"reconcileChildren\",\n    value: function reconcileChildren(prevActiveChildMapping, nextActiveChildMapping) {\n      var _this4 = this;\n\n      var size = this.props.size;\n      var nextChildKeys = nextActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var prevChildKeys = prevActiveChildMapping.map(function (c) {\n        return c.key;\n      });\n      var droppedKeys = prevChildKeys.filter(function (key) {\n        return !nextChildKeys.includes(key);\n      }); // if children haven't changed, there's nothing to reconcile\n\n      if (prevActiveChildMapping.length === nextActiveChildMapping.length && droppedKeys.length === 0) {\n        return;\n      } // remove any \"dropped\" children from the list of transitioning children\n\n\n      droppedKeys.forEach(function (key) {\n        return _this4.completeTransition({\n          key: key\n        });\n      }); // mark any new child as entering\n\n      nextChildKeys.forEach(function (key, index) {\n        var hasPrev = prevChildKeys.includes(key);\n\n        if (!hasPrev || _this4.currentlyTransitioningKeys[key]) {\n          // flag a view to enter if it's new (!hasPrev), or if it's not new (hasPrev) but is\n          // re-entering (is currently transitioning)\n          _this4.keysToEnter.push(key);\n        } else if (index < size - 1) {\n          // keep views that are less than size minus the \"transition out\" buffer\n          _this4.keysToStay.push(key);\n        } else {\n          // everything else is leaving\n          _this4.keysToLeave.push(key);\n        }\n      }); // mark any previous child not remaining as leaving\n\n      prevChildKeys.forEach(function (key) {\n        var hasNext = nextChildKeys.includes(key);\n        var isRendered = Boolean(_this4.groupRefs[key]); // flag a view to leave if it isn't in the new set (!hasNext) and it exists (isRendered)\n\n        if (!hasNext && isRendered) {\n          _this4.keysToLeave.push(key);\n        }\n      });\n\n      if (this.keysToEnter.length || this.keysToLeave.length) {\n        forwardOnWillTransition(null, this.props);\n      } // once the component has been updated, start the enter transition for new children,\n\n\n      var keysToEnter = this.keysToEnter;\n      this.keysToEnter = [];\n      keysToEnter.forEach(this.performEnter); // ... the stay transition for any children remaining,\n\n      var keysToStay = this.keysToStay;\n      this.keysToStay = [];\n      keysToStay.forEach(this.performStay); // ... and the leave transition for departing children\n\n      var keysToLeave = this.keysToLeave;\n      this.keysToLeave = [];\n      keysToLeave.forEach(this.performLeave);\n    }\n  }, {\n    key: \"completeTransition\",\n    value: function completeTransition(_ref) {\n      var key = _ref.key,\n          _ref$noForwarding = _ref.noForwarding,\n          noForwarding = _ref$noForwarding === void 0 ? false : _ref$noForwarding;\n\n      if (key in this.currentlyTransitioningKeys) {\n        delete this.currentlyTransitioningKeys[key];\n\n        if (!noForwarding && Object.keys(this.currentlyTransitioningKeys).length === 0) {\n          forwardOnTransition(null, this.props);\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      // support wrapping arbitrary children with a component that supports the necessary\n      // lifecycle methods to animate transitions\n      var childrenToRender = this.state.children.map(function (child) {\n        var isLeaving = child.props['data-index'] !== _this5.props.currentIndex && typeof child.props['data-index'] !== 'undefined';\n        return /*#__PURE__*/_react[\"default\"].cloneElement(_this5.props.childFactory(child), {\n          key: child.key,\n          ref: _this5.storeRefs(child.key),\n          leaving: isLeaving,\n          appearing: !_this5.hasMounted\n        });\n      }); // Do not forward TransitionGroup props to primitive DOM nodes\n\n      var props = Object.assign({}, this.props);\n      props.ref = this.props.componentRef;\n      delete props.childFactory;\n      delete props.component;\n      delete props.componentRef;\n      delete props.currentIndex;\n      delete props.onAppear;\n      delete props.onAppear;\n      delete props.onEnter;\n      delete props.onLeave;\n      delete props.onStay;\n      delete props.onTransition;\n      delete props.onWillTransition;\n      delete props.size;\n      return /*#__PURE__*/_react[\"default\"].createElement(this.props.component, props, childrenToRender);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      var children = mapChildren(props.children).slice(0, props.size);\n\n      if (state.firstRender) {\n        return {\n          activeChildren: children,\n          children: children,\n          firstRender: false\n        };\n      }\n\n      return {\n        activeChildren: children,\n        children: mergeChildren(children, state.children).slice(0, props.size)\n      };\n    }\n  }]);\n\n  return TransitionGroup;\n}(_react[\"default\"].Component);\n\nexports.TransitionGroup = TransitionGroup;\nTransitionGroup.propTypes =\n/** @lends ui/ViewManager.TransitionGroup.prototype */\n{\n  children: _propTypes2[\"default\"].node.isRequired,\n\n  /**\n   * Adapts children to be compatible with TransitionGroup\n   *\n   * @type {Function}\n   */\n  childFactory: _propTypes2[\"default\"].func,\n\n  /**\n   * Type of component wrapping the children.\n   *\n   * May be a DOM node or a custom React component.\n   *\n   * @type {String|Component}\n   * @default 'div'\n   */\n  component: _propTypes[\"default\"].renderable,\n\n  /**\n   * Called with a reference to [component]{@link ui/ViewManager.TransitionGroup#component}\n   *\n   * @type {Object|Function}\n   * @private\n   */\n  componentRef: _propTypes[\"default\"].ref,\n\n  /**\n   * Current Index the ViewManager is on\n   *\n   * @type {Number}\n   */\n  currentIndex: _propTypes2[\"default\"].number,\n\n  /**\n   * Called when each view is rendered during initial construction.\n   *\n   * @type {Function}\n   */\n  onAppear: _propTypes2[\"default\"].func,\n\n  /**\n   * Called when each view completes its transition into the viewport.\n   *\n   * @type {Function}\n   */\n  onEnter: _propTypes2[\"default\"].func,\n\n  /**\n   * Called when each view completes its transition out of the viewport.\n   *\n   * @type {Function}\n   */\n  onLeave: _propTypes2[\"default\"].func,\n\n  /**\n   * Called when each view completes its transition within the viewport.\n   *\n   * @type {Function}\n   */\n  onStay: _propTypes2[\"default\"].func,\n\n  /**\n   * Called once when all views have completed their transition.\n   *\n   * @type {Function}\n   */\n  onTransition: _propTypes2[\"default\"].func,\n\n  /**\n   * Called once before views begin their transition.\n   *\n   * @type {Function}\n   */\n  onWillTransition: _propTypes2[\"default\"].func,\n\n  /**\n   * Maximum number of rendered children.\n   *\n   * Used to limit how many visible transitions are active at any time.\n   * A value of 1 would prevent any exit transitions whereas a value of 2,\n   * the default, would ensure that only 1 view is transitioning on and 1 view is\n   * transitioning off at a time.\n   *\n   * @type {Number}\n   * @default 2\n   */\n  size: _propTypes2[\"default\"].number\n};\nTransitionGroup.defaultProps = {\n  childFactory: _identity[\"default\"],\n  component: 'div',\n  size: 2\n};\nvar _default = TransitionGroup;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}