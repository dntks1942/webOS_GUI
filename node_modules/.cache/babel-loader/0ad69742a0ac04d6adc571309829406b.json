{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SpotlightContainer = exports[\"default\"] = void 0;\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _pointer = require(\"../src/pointer\");\n\nvar _spotlight = _interopRequireDefault(require(\"../src/spotlight\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar isNewPointerPosition = function isNewPointerPosition(ev) {\n  return (0, _pointer.hasPointerMoved)(ev.clientX, ev.clientY);\n};\n\nvar SpotlightContainer = /*#__PURE__*/function () {\n  // set up context and props so we can use handle binding\n  function SpotlightContainer(_ref) {\n    var _this = this;\n\n    var containerConfig = _ref.containerConfig,\n        navigableFilter = _ref.navigableFilter,\n        preserveId = _ref.preserveId;\n\n    _classCallCheck(this, SpotlightContainer);\n\n    this.context = {};\n    this.props = {};\n\n    this.navigableFilter = function (elem) {\n      // If the component to which this was applied specified a navigableFilter, run it\n      if (typeof _this.filter === 'function') {\n        if (_this.filter(elem) === false) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    this.onBlurCapture = function (ev) {\n      if (_this.shouldPreventBlur) {\n        (0, _handle.stop)(ev);\n        return false;\n      }\n\n      return true;\n    };\n\n    this.onFocusCapture = function (ev) {\n      if (_this.props.disabled === true) {\n        (0, _handle.stop)(ev);\n\n        _this.silentBlur(ev);\n\n        return false;\n      }\n\n      return true;\n    };\n\n    this.onPointerEnter = (0, _handle.handle)(isNewPointerPosition, function () {\n      return _spotlight[\"default\"].setActiveContainer(_this.id);\n    }).bindAs(this, 'onPointerEnter');\n    this.onPointerLeave = (0, _handle.handle)((0, _handle.not)((0, _handle.forProp)('restrict', 'self-only')), isNewPointerPosition, function (ev) {\n      var parentContainer = ev.currentTarget.parentNode.closest('[data-spotlight-container]');\n\n      var activeContainer = _spotlight[\"default\"].getActiveContainer(); // if this container is wrapped by another and this is the currently active\n      // container, move the active container to the parent\n\n\n      if (parentContainer && activeContainer === _this.id) {\n        activeContainer = parentContainer.dataset.spotlightId;\n\n        _spotlight[\"default\"].setActiveContainer(activeContainer);\n      }\n    }).bindAs(this, 'onPointerLeave'); // spotlight id - set either via props or generated by Spotlight\n\n    this.id = null; // Preserve the spotlight id across instances when it is set via props and preserveId is set\n\n    this.canPreserveId = preserveId;\n    this.preserveId = false; // container config - set once when the container is added\n\n    this.config = containerConfig; // optional filter function to limit the spottable candidates for this container\n\n    this.filter = navigableFilter; // private hash of spotlight DOM attributes\n\n    this.attr = {\n      'data-spotlight-container': true\n    }; // Used to indicate that we want to stop propagation on blur events that occur as a\n    // result of this component imperatively blurring itself on focus when spotlightDisabled\n\n    this.shouldPreventBlur = false;\n  }\n\n  _createClass(SpotlightContainer, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      var disabled = props.disabled,\n          id = props.id,\n          muted = props.muted,\n          restrict = props.restrict;\n      this.props = props;\n\n      if (this.id == null || id && this.id !== id) {\n        if (this.id) {\n          this.releaseContainer(this.id);\n        }\n\n        this.id = _spotlight[\"default\"].add(_objectSpread(_objectSpread({}, this.config), {}, {\n          id: id,\n          restrict: restrict,\n          navigableFilter: this.navigableFilter\n        }));\n        this.preserveId = this.canPreserveId && this.id === id;\n      } else {\n        _spotlight[\"default\"].set(this.id, {\n          restrict: restrict\n        });\n      }\n\n      this.attr['data-spotlight-id'] = this.id;\n      this.attr['data-spotlight-container-disabled'] = disabled;\n      this.attr['data-spotlight-container-muted'] = muted;\n    }\n  }, {\n    key: \"unload\",\n    value: function unload() {\n      this.releaseContainer();\n    }\n  }, {\n    key: \"releaseContainer\",\n    value: function releaseContainer() {\n      if (this.preserveId) {\n        _spotlight[\"default\"].unmount(this.id);\n      } else {\n        _spotlight[\"default\"].remove(this.id);\n      }\n    }\n  }, {\n    key: \"silentBlur\",\n    value: function silentBlur(_ref2) {\n      var target = _ref2.target;\n      this.shouldPreventBlur = true;\n      target.blur();\n      this.shouldPreventBlur = false;\n    }\n  }, {\n    key: \"attributes\",\n    get: function get() {\n      return this.attr;\n    }\n  }]);\n\n  return SpotlightContainer;\n}();\n\nexports.SpotlightContainer = SpotlightContainer;\nvar _default = SpotlightContainer;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/sonjaeseong/workspace/webOS/CARROT/webOS_GUI/node_modules/@enact/spotlight/SpotlightContainerDecorator/SpotlightContainer.js"],"names":["Object","defineProperty","exports","value","SpotlightContainer","_handle","require","_pointer","_spotlight","_interopRequireDefault","obj","__esModule","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","configurable","writable","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","prototype","isNewPointerPosition","ev","hasPointerMoved","clientX","clientY","_ref","_this","containerConfig","navigableFilter","preserveId","context","elem","onBlurCapture","shouldPreventBlur","stop","onFocusCapture","disabled","silentBlur","onPointerEnter","handle","setActiveContainer","id","bindAs","onPointerLeave","not","forProp","parentContainer","currentTarget","parentNode","closest","activeContainer","getActiveContainer","dataset","spotlightId","canPreserveId","config","attr","setProps","muted","restrict","releaseContainer","add","set","unload","unmount","remove","_ref2","blur","get","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SpotlightContainer = exports[\"default\"] = void 0;\n\nvar _handle = require(\"@enact/core/handle\");\n\nvar _pointer = require(\"../src/pointer\");\n\nvar _spotlight = _interopRequireDefault(require(\"../src/spotlight\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar isNewPointerPosition = function isNewPointerPosition(ev) {\n  return (0, _pointer.hasPointerMoved)(ev.clientX, ev.clientY);\n};\n\nvar SpotlightContainer = /*#__PURE__*/function () {\n  // set up context and props so we can use handle binding\n  function SpotlightContainer(_ref) {\n    var _this = this;\n\n    var containerConfig = _ref.containerConfig,\n        navigableFilter = _ref.navigableFilter,\n        preserveId = _ref.preserveId;\n\n    _classCallCheck(this, SpotlightContainer);\n\n    this.context = {};\n    this.props = {};\n\n    this.navigableFilter = function (elem) {\n      // If the component to which this was applied specified a navigableFilter, run it\n      if (typeof _this.filter === 'function') {\n        if (_this.filter(elem) === false) {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    this.onBlurCapture = function (ev) {\n      if (_this.shouldPreventBlur) {\n        (0, _handle.stop)(ev);\n        return false;\n      }\n\n      return true;\n    };\n\n    this.onFocusCapture = function (ev) {\n      if (_this.props.disabled === true) {\n        (0, _handle.stop)(ev);\n\n        _this.silentBlur(ev);\n\n        return false;\n      }\n\n      return true;\n    };\n\n    this.onPointerEnter = (0, _handle.handle)(isNewPointerPosition, function () {\n      return _spotlight[\"default\"].setActiveContainer(_this.id);\n    }).bindAs(this, 'onPointerEnter');\n    this.onPointerLeave = (0, _handle.handle)((0, _handle.not)((0, _handle.forProp)('restrict', 'self-only')), isNewPointerPosition, function (ev) {\n      var parentContainer = ev.currentTarget.parentNode.closest('[data-spotlight-container]');\n\n      var activeContainer = _spotlight[\"default\"].getActiveContainer(); // if this container is wrapped by another and this is the currently active\n      // container, move the active container to the parent\n\n\n      if (parentContainer && activeContainer === _this.id) {\n        activeContainer = parentContainer.dataset.spotlightId;\n\n        _spotlight[\"default\"].setActiveContainer(activeContainer);\n      }\n    }).bindAs(this, 'onPointerLeave');\n    // spotlight id - set either via props or generated by Spotlight\n    this.id = null; // Preserve the spotlight id across instances when it is set via props and preserveId is set\n\n    this.canPreserveId = preserveId;\n    this.preserveId = false; // container config - set once when the container is added\n\n    this.config = containerConfig; // optional filter function to limit the spottable candidates for this container\n\n    this.filter = navigableFilter; // private hash of spotlight DOM attributes\n\n    this.attr = {\n      'data-spotlight-container': true\n    }; // Used to indicate that we want to stop propagation on blur events that occur as a\n    // result of this component imperatively blurring itself on focus when spotlightDisabled\n\n    this.shouldPreventBlur = false;\n  }\n\n  _createClass(SpotlightContainer, [{\n    key: \"setProps\",\n    value: function setProps(props) {\n      var disabled = props.disabled,\n          id = props.id,\n          muted = props.muted,\n          restrict = props.restrict;\n      this.props = props;\n\n      if (this.id == null || id && this.id !== id) {\n        if (this.id) {\n          this.releaseContainer(this.id);\n        }\n\n        this.id = _spotlight[\"default\"].add(_objectSpread(_objectSpread({}, this.config), {}, {\n          id: id,\n          restrict: restrict,\n          navigableFilter: this.navigableFilter\n        }));\n        this.preserveId = this.canPreserveId && this.id === id;\n      } else {\n        _spotlight[\"default\"].set(this.id, {\n          restrict: restrict\n        });\n      }\n\n      this.attr['data-spotlight-id'] = this.id;\n      this.attr['data-spotlight-container-disabled'] = disabled;\n      this.attr['data-spotlight-container-muted'] = muted;\n    }\n  }, {\n    key: \"unload\",\n    value: function unload() {\n      this.releaseContainer();\n    }\n  }, {\n    key: \"releaseContainer\",\n    value: function releaseContainer() {\n      if (this.preserveId) {\n        _spotlight[\"default\"].unmount(this.id);\n      } else {\n        _spotlight[\"default\"].remove(this.id);\n      }\n    }\n  }, {\n    key: \"silentBlur\",\n    value: function silentBlur(_ref2) {\n      var target = _ref2.target;\n      this.shouldPreventBlur = true;\n      target.blur();\n      this.shouldPreventBlur = false;\n    }\n  }, {\n    key: \"attributes\",\n    get: function get() {\n      return this.attr;\n    }\n  }]);\n\n  return SpotlightContainer;\n}();\n\nexports.SpotlightContainer = SpotlightContainer;\nvar _default = SpotlightContainer;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"module"}